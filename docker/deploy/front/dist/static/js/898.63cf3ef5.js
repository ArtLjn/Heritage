"use strict";(self["webpackChunkheritage"]=self["webpackChunkheritage"]||[]).push([[898],{2636:function(t,e,o){o.d(e,{Dx:function(){return r},az:function(){return s},l0:function(){return i},nU:function(){return c}});o(4114);var a=o(5720),n=o(9325);const s=t=>a.A.post("/api/account/login",t),c=()=>{const t=localStorage.getItem("city");t&&a.A.get(`/api/account/logout?city=${t}`).then((t=>{200===t.data.code&&(localStorage.clear(),n.A.push("/admin"))})).catch((t=>{localStorage.clear(),n.A.push("/admin")}))},i=()=>{const t=localStorage.getItem("token");t&&(a.A.interceptors.request.use((e=>(e.headers.Authorization=t,e))),a.A.get("/api/account/verifyToken").then((t=>{200===t.data.code?n.A.push("/adminHome"):(n.A.push("/admin"),localStorage.clear())})).catch((t=>{n.A.push("/admin"),localStorage.clear()})))},r=()=>a.A.get("/api/account/getAllAccount")},7080:function(t,e,o){o.r(e),o.d(e,{default:function(){return y}});var a=o(6768),n=o(5130),s=o.p+"static/img/login.e66a607b.jpg";const c=t=>((0,a.Qi)("data-v-9cd529f4"),t=t(),(0,a.jt)(),t),i={id:"login"},r={class:"container",id:"container"},l={class:"form-container sign-in-container"},d={action:"#"},u=c((()=>(0,a.Lk)("h1",null,"非物质文化遗产",-1))),g={key:0},h={key:1},p=c((()=>(0,a.Lk)("div",{class:"overlay-container"},[(0,a.Lk)("div",{class:"overlay"},[(0,a.Lk)("div",{class:"overlay-panel overlay-right"},[(0,a.Lk)("img",{class:"logo",src:s,alt:""})])])],-1)));function m(t,e,o,s,c,m){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(n.eB,{appear:"",name:"opacitytrans"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",l,[(0,a.Lk)("form",d,[u,c.showLogin?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"账户","onUpdate:modelValue":e[0]||(e[0]=t=>c.account=t)},null,512),[[n.Jo,c.account]]),(0,a.bo)((0,a.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[1]||(e[1]=t=>c.password=t)},null,512),[[n.Jo,c.password]]),(0,a.Lk)("div",{class:"button",onClick:e[2]||(e[2]=t=>m.handleLogin())},"登录")])):(0,a.Q3)("",!0),c.showRegister?((0,a.uX)(),(0,a.CE)("div",h,[(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"名称","onUpdate:modelValue":e[3]||(e[3]=t=>c.account=t)},null,512),[[n.Jo,c.account]]),(0,a.bo)((0,a.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[4]||(e[4]=t=>c.password=t)},null,512),[[n.Jo,c.password]]),(0,a.Lk)("div",{class:"button",onClick:e[5]||(e[5]=e=>t.login())},"注册"),(0,a.Lk)("div",{class:"click-button",onClick:e[6]||(e[6]=(...t)=>m.onLogin&&m.onLogin(...t))},"登录")])):(0,a.Q3)("",!0)])]),p])])),_:1})])}o(4114);var k=o(9325),L=o(2636),v={data(){return{account:"",password:"",showLogin:!0,showRegister:!1}},mounted(){(0,L.l0)()},methods:{onRegister(){this.showLogin=!1,this.showRegister=!0},onLogin(){this.showLogin=!0,this.showRegister=!1},handleLogin(){if(""===this.account||""===this.password)return void this.$message.warning("请输入账号或密码");const t={address:this.account,password:this.password};(0,L.az)(t).then((e=>{if(200===e.data.code){const o=e.data.data[0];localStorage.setItem("city",o[0]),localStorage.setItem("rank",o[1]),localStorage.setItem("token",o[2]),localStorage.setItem("name",t.address),this.$message.success("登录成功"),k.A.push("/adminHome")}else this.$message.error(e.data.message)})).catch((t=>{this.$message.error(t)}))}}},w=o(1241);const f=(0,w.A)(v,[["render",m],["__scopeId","data-v-9cd529f4"]]);var y=f}}]);