"use strict";(self["webpackChunkheritage"]=self["webpackChunkheritage"]||[]).push([[607],{5583:function(e,t,r){r.d(t,{H7:function(){return k},L4:function(){return o},Nx:function(){return i},QM:function(){return s},T7:function(){return d},_t:function(){return u},jL:function(){return c},kg:function(){return g},pF:function(){return l},sd:function(){return h}});var a=r(5720),n=r(4635);const i=()=>a.A.get("/api/heritage/getCategory"),o=()=>a.A.get("/api/heritage/getLevel"),l=(e,t,r)=>a.A.get(`/api/heritage/queryHeritageTask?page=${e}&size=${t}&raw=${r}`),u=e=>a.A.post("/api/heritage/CreateHeritageInheritor",e),c=e=>a.A.post("/api/heritage/CreateHeritageProject",e),s=e=>{const t=new FormData;return t.append("file",e),n.A.post("/api/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},h=(e,t)=>a.A.get(`/api/heritage/auditHeritageTask?id=${e}&allow=${t}`),g="1",d="2",k=(e,t,r,n)=>a.A.get(`/api/heritage/queryHeritageByLocate?page=${e}&size=${t}&raw=${r}&locate=${n}`)},4607:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var a=r(6768),n=r(4232);const i=["src"],o=["innerHTML"],l=["innerHTML"];function u(e,t,r,u,c,s){const h=(0,a.g2)("el-form-item"),g=(0,a.g2)("el-form"),d=(0,a.g2)("el-button"),k=(0,a.g2)("el-button-group");return(0,a.uX)(),(0,a.CE)(a.FK,null,[c.showInheritor?((0,a.uX)(),(0,a.Wv)(g,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(h,{label:"inheritor"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.heritageInheritor.inheritor),1)])),_:1}),(0,a.bF)(h,{label:"inheritorImg"},{default:(0,a.k6)((()=>[(0,a.Lk)("img",{src:c.heritageInheritor.inheritorImg,style:{"max-width":"200px",height:"200px","background-size":"cover","background-repeat":"no-repeat"},alt:"img"},null,8,i)])),_:1}),(0,a.bF)(h,{label:"project"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.heritageInheritor.project),1)])),_:1}),(0,a.bF)(h,{label:"cateGory"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.cateGory[c.heritageInheritor.cateGory]),1)])),_:1}),(0,a.bF)(h,{label:"level"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.rank[c.heritageInheritor.level]),1)])),_:1}),(0,a.bF)(h,{label:"details"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{innerHTML:c.heritageInheritor.details},null,8,o)])),_:1}),(0,a.bF)(h,{label:"locate"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.heritageInheritor.locate),1)])),_:1})])),_:1})):(0,a.Q3)("",!0),c.showProject?((0,a.uX)(),(0,a.Wv)(g,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(h,{label:"name"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.heritageProject.name),1)])),_:1}),(0,a.bF)(h,{label:"category"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.cateGory[c.heritageProject.category]),1)])),_:1}),(0,a.bF)(h,{label:"level"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.rank[c.heritageProject.level]),1)])),_:1}),(0,a.bF)(h,{label:"locate"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,n.v_)(c.heritageProject.locate),1)])),_:1}),(0,a.bF)(h,{label:"details"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{innerHTML:c.heritageProject.details},null,8,l)])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{onClick:s.back,type:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("返回")])),_:1},8,["onClick"]),(0,a.bF)(d,{onClick:s.handleAudit},{default:(0,a.k6)((()=>[(0,a.eW)("审核")])),_:1},8,["onClick"])])),_:1})],64)}var c=r(1387),s=r(9325),h=r(5583),g={name:"apply_view",components:{},data(){return{heritageInheritor:{inheritor:"",inheritorImg:"",project:"",cateGory:0,level:0,details:"",locate:""},heritageProject:{name:"",category:0,level:0,locate:"",details:""},cateGory:{0:"民间文学",1:"传统音乐",2:"传统舞蹈",3:"传统戏剧",4:"曲艺",5:"传统体育",6:"传统美术",7:"传统技艺",8:"传统医药",9:"民俗"},rank:{0:"国家级",1:"省级",2:"市级",3:"人类非物质文化遗产"},showInheritor:!0,showProject:!1,id:""}},mounted(){const e=(0,c.lq)(),t=e.query.raw.valueOf(),r=e.query.field;this.id=e.query.id,"1"===t?(this.showInheritor=!0,this.showProject=!1,this.heritageInheritor=JSON.parse(r)):(this.showInheritor=!1,this.showProject=!0,this.heritageProject=JSON.parse(r))},methods:{back(){s.A.back()},handleAudit(){this.$messageBox.confirm("是否确认审核","提示",{confirmButtonText:"pass",cancelButtonText:"refuse",type:"success",beforeClose:(e,t,r)=>{let a=!1;"confirm"===e&&(a=!0),t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",(0,h.sd)(this.id,a).then((e=>{t.confirmButtonLoading=!1,r(),this.$message({type:"success",message:"审核成功!"}),s.A.back()})).catch((e=>{t.confirmButtonLoading=!1,r(),this.$message({type:"error",message:"审核失败!"})}))}}).catch((e=>{}))}}},d=r(1241);const k=(0,d.A)(g,[["render",u]]);var p=k}}]);