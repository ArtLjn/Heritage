import{_ as w,B as x,C as k,q as T,s as M,G as F,D as S,y as D,F as Q,H as U,I as c,o as m,a as f,e as t,l as a,k as d,J as b,K as y,t as u,M as L,j as B,N as V,m as N,O,P as $,Q as I,R as j}from"./index-9711d56f.js";import{_ as R}from"./CardBoxModal-7ece0c43.js";import{_ as E}from"./BaseButtons-a0f83186.js";import{_ as G}from"./FormField-6572e944.js";const H={components:{UserAvatar:x,FormField:G,CardBoxModal:R,BaseLevel:k,BaseButtons:E,BaseButton:T,FormControl:M},props:{checkable:Boolean},data(){return{isModalActive:!1,isModalDangerActive:!1,searchQuery:"",accountList:[],AccountCopy:[],currentPage:0,itemsPerPage:10}},computed:{numPages(){return Math.ceil(this.filteredAccounts.length/this.itemsPerPage)},filteredAccounts(){return this.accountList.filter(e=>e.id.toString().includes(this.searchQuery)||e.address.toLowerCase().includes(this.searchQuery.toLowerCase())||e.password.toLowerCase().includes(this.searchQuery.toLowerCase())||e.city.toLowerCase().includes(this.searchQuery.toLowerCase())||e.level.toLowerCase().includes(this.searchQuery.toLowerCase()))},itemsPaginated(){const e=this.currentPage*this.itemsPerPage,s=e+this.itemsPerPage;return this.filteredAccounts.slice(e,s)},pagesList(){const e=this.numPages,s=5,l=2;let r=[];for(let n=0;n<e;n++)e<=s||n===0||n===e-1||n>=this.currentPage-l&&n<=this.currentPage+l?r.push(n):r[r.length-1]!=="..."&&r.push("...");return r},currentPageHuman(){return this.currentPage+1}},watch:{searchQuery(e){if(e===""||e===null){this.accountList=this.AccountCopy;return}const s=e.toLowerCase().split(" "),l=new RegExp(s.join("|"),"gi");this.accountList=this.AccountCopy.filter(r=>{const n=`${r.id} ${r.city} ${r.level}`.toLowerCase();return l.test(n)})}},mounted(){F().then(e=>{this.accountList=e.data.data[0],this.AccountCopy=[...this.accountList]})},methods:{mdiOpenInNew(){return S},mdiAccount(){return D},mdiContentCopy(){return Q},async downloadFile(){try{const e=await U({url:"/api/account/exportAccount",method:"GET",responseType:"blob",headers:{Authorization:localStorage.getItem("token")}}),s=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=s,l.setAttribute("download","Account.xlsx"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(s),document.body.removeChild(l)}catch(e){console.error("下载文件失败",e)}},copyToClipboard(e){const s=JSON.stringify(e,null,2);navigator.clipboard.writeText(s).then(()=>{this.$notify.success("JSON 数据已复制到剪贴板")}).catch(l=>{console.error("复制失败",l)})}}},J={class:"p-4"},W=t("p",null,[L("Lorem ipsum dolor sit amet "),t("b",null,"adipiscing elit")],-1),q=t("p",null,"This is a sample modal",-1),z=t("p",null,[L("Lorem ipsum dolor sit amet "),t("b",null,"adipiscing elit")],-1),K=t("p",null,"This is a sample modal",-1),X=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Address"),t("th",null,"Password"),t("th",null,"City"),t("th",null,"Level"),t("th")])],-1),Y={class:"border-b-0 lg:w-6 before:hidden"},Z={"data-label":"ID"},ee={"data-label":"Address"},te={"data-label":"Password"},oe={"data-label":"City"},ne={"data-label":"Level"},se={class:"before:hidden lg:w-1 whitespace-nowrap"},ae={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"};function le(e,s,l,r,n,i){const g=c("FormControl"),_=c("BaseButton"),h=c("BaseButtons"),C=c("FormField"),p=c("CardBoxModal"),A=c("UserAvatar"),P=c("BaseLevel");return m(),f(b,null,[t("div",J,[a(C,null,{default:d(()=>[a(g,{modelValue:n.searchQuery,"onUpdate:modelValue":s[0]||(s[0]=o=>n.searchQuery=o),icon:i.mdiAccount(),placeholder:"请输入账号信息"},null,8,["modelValue","icon"]),a(h,null,{default:d(()=>[a(_,{color:"warning",label:"导出Excel",icon:i.mdiOpenInNew(),onClick:i.downloadFile},null,8,["icon","onClick"])]),_:1})]),_:1})]),a(p,{modelValue:n.isModalActive,"onUpdate:modelValue":s[1]||(s[1]=o=>n.isModalActive=o),title:"Sample modal"},{default:d(()=>[W,q]),_:1},8,["modelValue"]),a(p,{modelValue:n.isModalDangerActive,"onUpdate:modelValue":s[2]||(s[2]=o=>n.isModalDangerActive=o),title:"Please confirm",button:"danger","has-cancel":""},{default:d(()=>[z,K]),_:1},8,["modelValue"]),t("table",null,[X,t("tbody",null,[(m(!0),f(b,null,y(i.itemsPaginated,o=>(m(),f("tr",{key:o.id},[t("td",Y,[a(A,{username:o.address,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["username"])]),t("td",Z,u(o.id),1),t("td",ee,u(o.address),1),t("td",te,u(o.password),1),t("td",oe,u(o.city),1),t("td",ne,u(o.level),1),t("td",se,[a(h,{type:"justify-start lg:justify-end","no-wrap":""},{default:d(()=>[a(_,{color:"info",icon:i.mdiContentCopy(),small:"",onClick:v=>i.copyToClipboard(o)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),t("div",ae,[a(P,null,{default:d(()=>[a(h,null,{default:d(()=>[(m(!0),f(b,null,y(i.pagesList,o=>(m(),B(_,{key:o,active:o===n.currentPage,label:o==="..."?"...":o+1,color:o===n.currentPage?"lightDark":"whiteDark",small:"",onClick:v=>o!=="..."&&(n.currentPage=o)},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"Page "+u(i.currentPageHuman)+" of "+u(i.numPages),1)]),_:1})])],64)}const re=w(H,[["render",le]]),ce={components:{AccountTable:re,SectionMain:V,CardBox:N,LayoutAuthenticated:O,SectionTitleLineWithButton:$},methods:{mdiGithub(){return I},mdiTableBorder(){return j}}};function ie(e,s,l,r,n,i){const g=c("SectionTitleLineWithButton"),_=c("account-table"),h=c("CardBox"),C=c("SectionMain"),p=c("LayoutAuthenticated");return m(),B(p,null,{default:d(()=>[a(C,null,{default:d(()=>[a(g,{icon:i.mdiTableBorder(),title:"Account Manage",main:""},null,8,["icon"]),a(h,{class:"mb-6","has-table":""},{default:d(()=>[a(_,{checkable:""})]),_:1})]),_:1})]),_:1})}const he=w(ce,[["render",ie]]);export{he as default};
